package publish.subscribe.android;
import org.zeromq.ZMQ;

public class ClientMessageSender implements ClientMessageSenderInterface {

	public ClientMessageSender() {}

	@Override
	public void send(String stringMessage, String serverIP, String port, String clientQueueName) 
			throws Exception {
		ZMQ.Context context = ZMQ.context(1);
        ZMQ.Socket socket = context.socket(ZMQ.REP);
        socket.bind("tcp://127.0.0.1:5556");
 
        while(!Thread.currentThread().isInterrupted()) {
            byte[] msg = socket.recv(0);
            uiThreadHandler.sendMessage(
                    Util.bundledMessage(uiThreadHandler, new String(msg)));
            socket.send(new String(Util.reverseInPlace(msg)), 0);
        }
        socket.close();
        context.term();
	}
}
